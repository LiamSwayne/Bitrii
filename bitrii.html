<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>YOUR GAME NAME HERE</title>
    <style>
        body {
            background-color: #000000;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
    </style>
</head>
<body>
    <!-- Fullscreen button -->
    <svg style="position:absolute; top:5px; right:5px; width:24px; cursor:pointer;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><g><path d="M4.5,17.2c-2.1,0-3.8-1.7-3.8-3.8v-9c0-2.1,1.7-3.8,3.8-3.8h9c2.1,0,3.8,1.7,3.8,3.8v9c0,2.1-1.7,3.8-3.8,3.8H4.5z"/><path fill="#FFF" d="M13.5,1.5c1.7,0,3,1.3,3,3v9c0,1.7-1.3,3-3,3h-9c-1.7,0-3-1.3-3-3v-9c0-1.7,1.3-3,3-3H13.5M13.5,0h-9C2,0,0,2,0,4.5v9C0,16,2,18,4.5,18h9c2.5,0,4.5-2,4.5-4.5v-9C18,2,16,0,13.5,0z"/></g><polyline fill="none" stroke="#FFF" stroke-width="1.5" stroke-miterlimit="10" points="8,4.5 4.5,4.5 4.5,8"/><polyline fill="none" stroke="#FFF" stroke-width="1.5" stroke-miterlimit="10" points="10,13.5 13.5,13.5 13.5,10"/><polyline fill="none" stroke="#FFF" stroke-width="1.5" stroke-miterlimit="10" points="4.5,10 4.5,13.5 8,13.5"/><polyline fill="none" stroke="#FFF" stroke-width="1.5" stroke-miterlimit="10" points="13.5,8 13.5,4.5 10,4.5"/></svg>

    <!-- Fullscreen functionality -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const svg = document.querySelector("svg");

            svg.addEventListener("click", () => {
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.mozRequestFullScreen) {
                    document.documentElement.mozRequestFullScreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) {
                    document.documentElement.msRequestFullscreen();
                }

                svg.style.display = "none";
            });

            document.addEventListener("fullscreenchange", () => {
                if (!document.fullscreenElement) {
                    svg.style.display = "block";
                }
            });
        });
    </script>

    <!-- Engine -->
    <script>
        // layers are entities that are drawn to the display
        class Layer {
            // the order of the layers
            static ordering = [];

            // name is the name of the layer
            // index is the position of the layer, -1 becomes the front
            // show determines whether or not the layer is visible
            constructor(name, index=-1, show=true, x=0, y=0) {
                // layers must have unique names
                if (Layer.ordering.includes(name)) {
                    throw new Error('Layer with name \'' + name + '\' already exists.');
                }

                this.name = name;
                this.index = index;
                this.show = show;
                this.x = x;
                this.y = y;
                this.sprite = [];
                this.sprites = {};

                Layer.ordering.splice(index, 0, name); // Add layer to ordering
            }

            // get the name of the previous layer
            prev() {
                const prevIndex = this.index - 1;
                if (prevIndex >= 0 && prevIndex < Layer.ordering.length) {
                    return Layer.ordering[prevIndex];
                }
                return null; // No previous layer
            }

            // get the name of the next layer
            next() {
                const nextIndex = this.index + 1;
                if (nextIndex >= 0 && nextIndex < Layer.ordering.length) {
                    return Layer.ordering[nextIndex];
                }
                return null; // No next layer
            }

            // add or replace a sprite
            // name is the sprite name
            // sprite is a list of strings, with each string being a row of pixels
            /* Ex, the Bitrii logo:
                addSprite("logo",[
                    "111  1  1      1 1",
                    "1  1   111 1 1    ",
                    "111  1  1  11  1 1",
                    "1  1 1  1  1   1 1",
                    "111  1  11 1   1 1"]
            */
            addSprite(spriteName, sprite) {
                this.sprites[spriteName] = sprite;
            }

            // remove the sprite with matching name
            removeSprite(spriteName) {
                if (this.sprites[spriteName]) {
                    delete this.sprites[spriteName];
                } else {
                    throw new Error(`sprite with name '${spriteName}' does not exist.`);
                }
            }

            // move the layer
            move(x=0,y=0) {
                this.x += x;
                this.y += y;
            }
        }

        // create grid
        grid = document.createElement("div");
        grid.style.display = "grid";
        grid.style.gap = "0";

        // create display
        function initDisplay(xResolution, yResolution) {

            function scaleGrid() {
                const windowHeight = window.innerHeight;
                const windowWidth = window.innerWidth;
                const cellSize = Math.min(windowHeight / yResolution, windowWidth / xResolution);

                grid.style.gridTemplateColumns = 'repeat(' + xResolution + ', ' + cellSize + 'px)';
                grid.style.gridTemplateRows = 'repeat(' + yResolution + ', ' + cellSize + 'px)';
            }

            // scale grid to initial window size
            scaleGrid();

            // scale the grid every time the window is resized
            window.addEventListener("resize", scaleGrid);

            // TODO: replace with startup animation and utilize layer rendering
            for (let i = 0; i < xResolution * yResolution; i++) {
                const cell = document.createElement("div");
                cell.style.backgroundColor = "#AAAAAA";

                // example of how to change the color of a grid element
                if (i == 0) {
                    cell.style.backgroundColor = "#FFFFFF";
                }
                grid.appendChild(cell);
            }

            document.body.appendChild(grid);

            // create the variable used to access cells
            cells = grid.querySelectorAll("div"); // Get all the cells in the grid
        }

        // update frame
        function update() {
            // Process the current cell
            cells[0].style.backgroundColor = key[" "]; // For example, change the cell color
        }
    </script>

    <!-- Game -->
    <script>
        // SETTINGS
        const horizontalResolution = 40;
        const verticalResolution = 30;
        const framerate = 10;
        key = { // translation of sprite characters to hex codes
            " ":"#00000000", // transparent
            "0":"#000000", // black
            "1":"#FFFFFF" // white
        }

        // create the display
        initDisplay(horizontalResolution,verticalResolution);
        setInterval(update, 1000 / framerate)

    </script>
</body>
</html>